<!DOCTYPE html>
<html>
<head>
  <title>StarLine Login</title>
</head>
<body>

<h2>Login</h2>
<input id="email" placeholder="Email">
<input id="password" type="password" placeholder="Password">
<button onclick="login()">Login</button>

<h2>Sign Up</h2>
<input id="signupEmail" placeholder="Email">
<input id="signupPassword" type="password" placeholder="Password">
<input id="signupUsername" placeholder="Username">
<input id="signupPic" placeholder="Profile Picture URL (optional)">
<button onclick="signup()">Sign Up</button>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.24.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.24.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.24.0/firebase-firestore-compat.js"></script>

<script>
  const firebaseConfig = {
    apiKey: "AIzaSyDaZl3MtYPutJMY1aqozvVoN8WbjNnlW20",
    authDomain: "starline-social.firebaseapp.com",
    projectId: "starline-social",
    messagingSenderId: "902689303596",
    appId: "1:902689303596:web:b77d39e05d51c5b8993589"
  };

  firebase.initializeApp(firebaseConfig);
  const auth = firebase.auth();
  const db = firebase.firestore();

  function signup() {
    auth.createUserWithEmailAndPassword(
      signupEmail.value,
      signupPassword.value
    ).then(cred => {
      return db.collection("users").doc(cred.user.uid).set({
        username: signupUsername.value,
        bio: "",
        profilePic: signupPic.value || "https://via.placeholder.com/120"
      });
    }).then(() => {
      window.location.href = "index.html";
    });
  }

  function login() {
    auth.signInWithEmailAndPassword(
      email.value,
      password.value
    ).then(() => {
      window.location.href = "index.html";
    });
  }
</script>

</body>
</html>
